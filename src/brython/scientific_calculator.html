<script type="text/javascript">
    function js_insert(value) {
        __BRYTHON__.page.insert(value);
    }

    function js_clear_display() {
        __BRYTHON__.page.clear_display();
    }

    function js_calculate() {
        __BRYTHON__.page.calculate();
    }

    // Test before loading
    document.addEventListener("DOMContentLoaded", function() {
        console.log('Testing if Brython functions are mapped correctly...');
        if (__BRYTHON__.page.clear_display && __BRYTHON__.page.insert && __BRYTHON__.page.calculate) {
            try {
                js_clear_display();
                js_insert('7');
                js_insert('+');
                js_insert('3');
                js_calculate();
                let result = document.getElementById('display').value;
                console.assert(result === '10', '7 + 3 test failed');

                console.log('All tests passed: Calculator functions are working.');
            } catch (error) {
                console.error('Test failed:', error);
                document.getElementById('error-box').textContent = 'Test failed: ' + error;
            }
        } else {
            console.error('Brython functions are not mapped correctly');
            document.getElementById('error-box').textContent = 'Brython functions are not mapped correctly';
        }
    });
</script>
